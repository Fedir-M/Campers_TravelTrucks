import{a as F,u as b,j as e,L as S,b as B,c as P,r as m,B as A,f as T}from"./index-BL1WwVVU.js";import{B as h}from"./Button-C1CGYhL_.js";import{f as I,t as C,a as V,i as _}from"./truckSelectors-NOzPANzi.js";import{c as $,C as M}from"./CategoriesFeaturesLabels-CtXa-tYL.js";import{s as j}from"./spriteTrucks-DsQvWTwW.js";import"./IconForButton-DlEQerl4.js";const E=({visibleCount:o,filteredTrucks:t,formInput:r})=>{const l=F(),n=b(I),a=t.slice(0,o),x=i=>{n.includes(i)?l(B(i)):l(P(i))};return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"flex flex-col gap-[6px]",children:a.map(i=>{//! connects with Stage-1
var f;const p=n.includes(i.id);return e.jsxs("li",{className:"flex flex-col md:flex-row p-[14px] border-[1px] rounded-[20px] outline-0 focus:ring-2  focus:ring-textAccent hover:ring-1 hover:ring-textAccent",style:{borderColor:"var(--color-borderButtonColor)"},children:[e.jsx("img",{src:((f=i.gallery[0])==null?void 0:f.thumb)||"https://defaultPicture",alt:`${i.name} preview`,className:"mainImgPrev object-cover rounded-[10px] md:max-w-[292px] md:max-h-[320px]"}),e.jsxs("div",{className:"md:ml-[24px] md:w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{className:"text-[18px] lg:text-[24px] leading-[32px]",children:i.name}),e.jsxs("div",{className:"flex",children:[e.jsxs("strong",{className:"text-[14px] lg:text-[24px] font-medium leading-[32px]",children:["$ ",i.price]}),e.jsx(h,{iconW:"24px",iconH:"24px",onClick:()=>x(i.id),icon:"iconHeartBlack",className:`ml-[12px] mt-[6px] md:mt-[0px] w-[24px] h-[24px] ${p?"fill-heartColor":"fill-textPrimary"}`})]})]}),e.jsxs("div",{className:"lg:flex mt-[8px]",children:[e.jsxs("div",{className:"flex lg:flex-row items-center  flex-wrap",children:[e.jsx("svg",{className:`w-[16px] h-[16px] ${i.reviews&&i.reviews.length>0?"fill-starColor":"fill-bgBadgeColor"}`,children:e.jsx("use",{className:"w-[32px] h-[32px] ",href:`${j}#iconStarGrey`})}),e.jsxs("p",{className:"text-[14px] lg:text-[16px] mt-[0px]  ml-[4px]",children:[" ",i.rating]})]}),e.jsxs("div",{className:"flex items-center  flex-wrap",children:[e.jsx("svg",{className:"fill-textPrimary ml-[0px] lg:ml-[16px]",width:"16",height:"16",children:e.jsx("use",{className:"w-[32px] h-[32px] ",href:`${j}#iconMapGrey`})}),e.jsx("p",{className:"text-[14px] lg:text-[16px] ml-[4px]",children:i.location})]})]}),e.jsx("p",{className:"text-[14px] md:text-[16px] mt-[24px] line-clamp-1 text-textMonthPassed font-normal",children:i.description}),e.jsx("ul",{className:"flex flex-wrap gap-[4px] md:gap-[8px] mt-[24px]",children:$.map(d=>i[d.category]===d.value&&e.jsx("li",{children:e.jsx(M,{iconId:d.iconCategoryId,categoryLabel:d.categoryLabel})},d.category))}),e.jsx("div",{className:"flex justify-center md:justify-end w-full",children:e.jsx(S,{to:`/catalog/${i.id}`,state:{from:"/catalog",filters:r},className:"mt-[24px] min-w-[173px] max-w-[250px] font-medium py-[16px] px-[48px] tracking-[-0.08px] leading-[1.5em] text-center text-textSecondary bg-ButtonPrimaryColor rounded-[200px] inline-flex items-center justify-center  hover:bg-linear-45 hover:from-[#3c9767] from-40% hover:to-[#ffc531] to-90% hover:shadow-lg hover:shadow-green-500/50 outline-0 focus:ring-2 focus:ring-green-500/50 focus:bg-ButtonHoverColor focus:shadow-lg focus:shadow-green-500/50 transition-colors duration-300 ease-in",children:"Show more"})})]})]},i.id)})})})},w=(o,t)=>o.filter(r=>{if(t.location&&!r.location.toLowerCase().includes(t.location.toLowerCase())||t.transmission&&r.transmission.toLowerCase()!==t.transmission.toLowerCase()||t.Automatic&&r.transmission.toLowerCase()!=="automatic"||t.engine&&r.engine.toLowerCase()!==t.engine.toLowerCase()||t.Petrol&&r.engine.toLowerCase()!=="petrol"||t.AC&&!r.AC||t.bathroom&&!r.bathroom||t.kitchen&&!r.kitchen||t.TV&&!r.TV||t.radio&&!r.radio||t.refrigerator&&!r.refrigerator||t.microwave&&!r.microwave||t.gas&&!r.gas||t.water&&!r.water)return!1;const l={Van:"panelTruck","Fully Integrated":"fullyIntegrated",Alcove:"alcove"},n=Object.entries(t).filter(([a,x])=>x&&l[a]).map(([a])=>l[a].toLowerCase());return!(n.length>0&&!n.includes(r.form.toLowerCase()))}),O=({name:o,placeholder:t,onInputChange:r,value:l=""})=>{const n=a=>{r(a)};return e.jsx("div",{children:e.jsx("input",{type:"text",name:o,placeholder:t,onChange:n,value:l,className:"w-[100%] px-[20px] py-[10px] mt-[8px]  rounded-[12px] font-normal text-textPlaceholder bg-bgInputColor focus:outline-none focus:ring-1 focus:ring-borderButtonHoverColor"})})},R=[{labelFilter:"AC",iconFilter:"icon-wind"},{labelFilter:"Automatic",iconFilter:"icon-diagram"},{labelFilter:"Kitchen",iconFilter:"icon-cup-hot"},{labelFilter:"TV",iconFilter:"icon-tv"},{labelFilter:"Bathroom",iconFilter:"icon-ph_shower"},{labelFilter:"Petrol",iconFilter:"icon-engine"},{labelFilter:"Radio",iconFilter:"icon-radio"},{labelFilter:"Refrigerator",iconFilter:"icon-solar_fridge-outline"},{labelFilter:"Water",iconFilter:"icon-ion_water-outline"},{labelFilter:"Microwave",iconFilter:"icon-lucide_microwave"}],H=[{labelFilter:"Van",iconFilter:"icon-bi_grid-1x2"},{labelFilter:"Fully Integrated",iconFilter:"icon-bi_grid"},{labelFilter:"Alcove",iconFilter:"icon-bi_grid-3x3-gap"}],y=({initialFilterState:o,formInput:t,setFormInput:r,setFilteredTrucks:l,setRenderTrigger:n,setVisibleCount:a})=>{const x=b(C),i=s=>{const{name:c,value:u}=s.target;r(L=>({...L,[c]:u}))},p=s=>{r(c=>({...c,[s]:!c[s]}))},f=s=>{r(c=>({...c,[s]:!c[s]}))},d=s=>{s.preventDefault(),n(t)},g=s=>{s.preventDefault(),r(o),localStorage.setItem("filterForm",JSON.stringify(x)),l(x),a(4),s.target.blur()};return e.jsx("div",{className:"px-[32px] pt-[20px] pb-[50px]  md:px-[14px] md:pt-[8px] md:py-[32px]  lg:px-[44px] lg:py-[48px]",children:e.jsxs("form",{onSubmit:d,children:[e.jsx("p",{className:"text-textSecondary lg:text-[#475467] text-[12px] lg:text-[16px] font-normal leading-[24px]",children:"Location"}),e.jsx(O,{name:"location",placeholder:"Location",onInputChange:i,value:t.location}),e.jsx("p",{className:"text-[12px] lg:text-[16px] text-textSecondary lg:text-[#475467] font-medium leading-[24px] mt-[16px] lg:mt-[40px]",children:"Filters"}),e.jsxs("div",{className:"mt-[16px] lg:mt-[32px]  text-center lg:text-left",children:[e.jsx("strong",{className:"text-[14px] lg:text-[20px]  ",children:"Vehicle equipment"}),e.jsx("div",{className:"border-t mt-[2px] lg:mt-[24px]",style:{borderColor:"var(--color-borderButtonColor)"}}),e.jsx("ul",{className:"flex flex-wrap items-center justify-center gap-x-[12px] gap-y-[8px] mt-[24px]",children:R.map((s,c)=>e.jsx("li",{children:e.jsx(h,{buttonLabel:s.labelFilter,icon:s.iconFilter,onClick:()=>p(s.labelFilter),className:`flex flex-col items-center justify-center buttonFilters ${t[s.labelFilter]?"buttonFiltersActive":""}`})},c))})]}),e.jsxs("div",{className:"mt-[20px] lg:mt-[32px]  text-center lg:text-left",children:[e.jsx("strong",{className:"text-[14px] lg:text-[20px]",children:"Vehicle type"}),e.jsx("div",{className:"border-t mt-[2px] lg:mt-[24px]",style:{borderColor:"var(--color-borderButtonColor)"}}),e.jsx("ul",{className:"flex flex-wrap items-center justify-center gap-x-[12px] gap-y-[8px] mt-[24px]",children:H.map((s,c)=>e.jsx("li",{children:e.jsx(h,{buttonLabel:s.labelFilter,icon:s.iconFilter,onClick:()=>f(s.labelFilter),className:`flex flex-col items-center justify-center  } buttonFilters  ${t[s.labelFilter]?"buttonFiltersActive":""}`})},c))})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center lg:flex-col",children:[e.jsx("div",{className:"flex items-center justify-center order-2 lg:order-1 mx-[20px]",children:e.jsx(h,{buttonLabel:"Search",type:"submit",className:"min-w-[40px] md:min-w-[173px] max-w-[250px]  px-[18px] py-[6px]  md:px-[48px] md:py-[12px]  tracking-[-0.08px] leading-[1.5em] text-center text-textSecondary bg-ButtonPrimaryColor rounded-[200px] inline-flex items-center justify-center  hover:bg-linear-45 hover:from-[#3c9767] from-40% hover:to-[#ffc531] to-90% hover:shadow-lg hover:shadow-green-500/50 outline-0 focus:ring-2 focus:ring-green-500/50 focus:bg-ButtonHoverColor focus:shadow-lg focus:shadow-green-500/50 transition-colors duration-300 ease-in mt-[40px]"})}),e.jsx("div",{className:"flex items-center justify-center order-1 lg:order-2 mx-[22px]",children:e.jsx(h,{onClick:g,buttonLabel:"Reset",className:"min-w-[40px] max-w-[250px]  px-[18px] py-[6px]  md:px-[48px] md:py-[12px]  tracking-[-0.08px] leading-[1.5em] text-center text-textPrimary bg-bgPrimaryColor rounded-[12px] border border-borderButtonColor inline-flex items-center justify-center  hover:ring-heartColor hover:ring-1  outline-0 focus:ring-2  focus:ring-heartColor focus:shadow-lg  active:ring-0 active:shadow-[inset_0px_2px_5px_rgba(0,0,0,0.2)] active:shadow-textPlaceholder transition-all duration-200 ease-in-out mt-[40px]"})})]})]})})};function N(o){var t,r,l="";if(typeof o=="string"||typeof o=="number")l+=o;else if(typeof o=="object")if(Array.isArray(o)){var n=o.length;for(t=0;t<n;t++)o[t]&&(r=N(o[t]))&&(l&&(l+=" "),l+=r)}else for(r in o)o[r]&&(l&&(l+=" "),l+=r);return l}function J(){for(var o,t,r=0,l="",n=arguments.length;r<n;r++)(o=arguments[r])&&(t=N(o))&&(l&&(l+=" "),l+=t);return l}const q=({isOpen:o,children:t})=>(m.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[o]),e.jsx("div",{className:J("lg:hidden fixed w-full h-full mt-[72px] px-0 z-19 right-0 -top-full flex flex-col items-center  bg-textMonthPassed opacity-98  duration-500  max-h-[calc(100vh-72px-env(safe-area-inset-bottom))] overflow-y-auto",o&&"top-0"),children:t})),W=()=>e.jsx(A,{color:"#198f51",height:18,speedMultiplier:1,width:220,cssOverride:{display:"block",margin:"0 auto",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),v={location:"",transmission:"",engine:"",AC:!1,bathroom:!1,kitchen:!1,TV:!1,radio:!1,refrigerator:!1,microwave:!1,gas:!1,water:!1,Automatic:!1,Petrol:!1,Van:!1,"Fully Integrated":!1,Alcove:!1},Y=()=>{const o=F(),t=b(V),r=b(_),l=b(C),[n,a]=m.useState(4),[x,i]=m.useState(JSON.parse(localStorage.getItem("filterForm"))??v),[p,f]=m.useState(x),[d,g]=m.useState(l||[]);m.useEffect(()=>{m.startTransition(()=>{o(T())})},[o]),m.useEffect(()=>{if(localStorage.getItem("filterForm")){const u=w(l,p);localStorage.setItem("filterForm",JSON.stringify(p)),g(u)}else{const u=w(l,p);localStorage.setItem("filterForm",JSON.stringify(p)),g(u),a(4),g(l)}},[l,p]);const s=c=>{a(u=>u+4),c.target.blur()};return e.jsx("section",{className:"px-[12px] pt-[12px] pb-[40px]  lg:px-[64px] lg:pt-[48px] lg:pb-[50px]",children:e.jsxs("div",{className:"flex flex-row w-full",children:[e.jsx("aside",{className:"hidden lg:block max-w-[488px]  ",children:e.jsx(y,{initialFilterState:v,formInput:x,setFormInput:i,setFilteredTrucks:g,setRenderTrigger:f,setVisibleCount:a})}),t?e.jsx("div",{className:"w-full relative",children:e.jsx(W,{})}):e.jsxs("div",{className:"max-w-[936px]",children:[e.jsx(E,{visibleCount:n,filteredTrucks:d}),!t&&d.length>n&&e.jsx("div",{className:"flex items-center justify-center mt-[20px] lg:mt-[30px]",children:e.jsx(h,{onClick:s,buttonLabel:"Load more",className:"min-w-[173px] max-w-[250px] py-[16px] px-[48px] tracking-[-0.08px] leading-[1.5em] text-center text-textPrimary bg-bgPrimaryColor rounded-[200px] border border-borderButtonColor inline-flex items-center justify-center  hover:bg-linear-45 hover:from-[#dadde1] from-40% hover:to-[#ffc531] to-90% outline-0 focus:ring-2 focus:ring-green-500/50 focus:bg-ButtonHoverColor focus:shadow-lg focus:shadow-green-500/50 transition-colors duration-300 ease-in "})})]}),e.jsx(q,{isOpen:r,children:e.jsx(y,{initialFilterState:v,formInput:x,setFormInput:i,setFilteredTrucks:g,setRenderTrigger:f,setVisibleCount:a})})]})})};export{Y as default};
